"use strict";(self.webpackChunkreact_toastify_doc=self.webpackChunkreact_toastify_doc||[]).push([[4514],{7661:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"migration-v11","title":"Migrate to v11","description":"What is new in v11","source":"@site/docs/migrate-to-v11.mdx","sourceDirName":".","slug":"/migration-v11","permalink":"/react-toastify/migration-v11","draft":false,"unlisted":false,"editUrl":"https://github.com/fkhadra/react-toastify-doc/edit/master/docs/migrate-to-v11.mdx","tags":[],"version":"current","frontMatter":{"id":"migration-v11","title":"Migrate to v11","sidebar_label":"\ud83d\ude80 Migrate to v11"},"sidebar":"someSidebar","previous":{"title":"Installation","permalink":"/react-toastify/installation"},"next":{"title":"Migrate to v10","permalink":"/react-toastify/migration-v10"}}');var o=t(5105),i=t(9621),a=t(4637);const r={id:"migration-v11",title:"Migrate to v11",sidebar_label:"\ud83d\ude80 Migrate to v11"},l=void 0,c={},d=[{value:"What is new in v11",id:"what-is-new-in-v11",level:2},{value:"No need to import the css file anymore",id:"no-need-to-import-the-css-file-anymore",level:3},{value:"Easy customization!",id:"easy-customization",level:3},{value:"Custom progress bar",id:"custom-progress-bar",level:3},{value:"Accessibility and keyboard navigation",id:"accessibility-and-keyboard-navigation",level:3},{value:"Notification removal reason with onClose callback",id:"notification-removal-reason-with-onclose-callback",level:3},{value:"\ud83d\udca5 Breaking Changes",id:"-breaking-changes",level:2},{value:"useToastContainer and useToast no longer exposed",id:"usetoastcontainer-and-usetoast-no-longer-exposed",level:3},{value:"onClose and onOpen no longer receive children props",id:"onclose-and-onopen-no-longer-receive-children-props",level:3},{value:"Styling",id:"styling",level:3},{value:"\ud83d\udc1e Bug Fixes",id:"-bug-fixes",level:2},{value:"\ud83d\udd2eWhat&#39;s next?",id:"whats-next",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h2,{id:"what-is-new-in-v11",children:"What is new in v11"}),"\n",(0,o.jsx)(n.p,{children:"I\u2019m super excited about this release! The main focus was on customization, and my goal was to empower you (and myself) so you can fully personalize the look and feel for the notifications."}),"\n",(0,o.jsx)(n.p,{children:"In short, react-toastify should be able to blend in any design system."}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"customization FTW",src:t(4290).A+"",width:"1240",height:"857"})}),"\n",(0,o.jsx)(n.h3,{id:"no-need-to-import-the-css-file-anymore",children:"No need to import the css file anymore"}),"\n",(0,o.jsx)(n.p,{children:"The stylesheet is now injected automatically, so you no longer need to import it. The CSS file is still exported by the library."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-tsx",children:"  import { ToastContainer, toast } from 'react-toastify';\n\n  function App(){\n    const notify = () => toast(\"Wow so easy !\");\n\n    return (\n      <div>\n        <button onClick={notify}>Notify !</button>\n        <ToastContainer />\n      </div>\n    );\n  }\n"})}),"\n",(0,o.jsx)(n.h3,{id:"easy-customization",children:"Easy customization!"}),"\n",(0,o.jsx)(n.p,{children:"One of the top requests has been how to customize notifications. To be fair, until this release, it was quite challenging because it required users to override numerous CSS classes."}),"\n",(0,o.jsx)(n.p,{children:"I\u2019ve simplified the DOM structure of the notification by removing extraneous div elements, nested elements, etc... It\u2019s a significant breaking change, but it\u2019s truly worth the effort. I can confidently say that the library can now seamlessly integrate into any design system."}),"\n",(0,o.jsxs)(n.p,{children:["Below, I\u2019ve implemented a couple of different designs using only Tailwind. ",(0,o.jsx)(n.strong,{children:"I didn\u2019t override a single CSS class from react-toastify \ud83e\udd2f!"})]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"customization FTW",src:t(4290).A+"",width:"1240",height:"857"})}),"\n",(0,o.jsx)(n.admonition,{type:"info",children:(0,o.jsxs)(n.p,{children:["Head to ",(0,o.jsx)(n.a,{href:"https://stackblitz.com/edit/react-toastify-how-to-style?file=src%2FApp.tsx",children:"stackblitz"})," to check the code."]})}),"\n",(0,o.jsx)(n.p,{children:"How does it work in practice? On the left side, we have the old DOM structure vs the new one on the right side."}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"structure",src:t(3831).A+"",width:"1150",height:"168"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"Toastify__toast-body"})," and its child are now completely gone."]}),"\n",(0,o.jsxs)(n.li,{children:["The ",(0,o.jsx)(n.code,{children:"CloseButton"})," now uses an absolute position."]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["Thanks to those changes, ",(0,o.jsx)(n.strong,{children:"nothing will interfere with your content."})]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"Toastify__toast"})," has some sensible default values(e.g., border-radius, shadow, etc...) that can be customized using css or by updating the associated css variables:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-css",children:"width: var(--toastify-toast-width);\nmin-height: var(--toastify-toast-min-height);\npadding: var(--toastify-toast-padding);\nborder-radius: var(--toastify-toast-bd-radius);\nbox-shadow: var(--toastify-toast-shadow);\nmax-height: var(--toastify-toast-max-height);\nfont-family: var(--toastify-font-family);\n"})}),"\n",(0,o.jsx)(n.h3,{id:"custom-progress-bar",children:"Custom progress bar"}),"\n",(0,o.jsx)(n.p,{children:"Allowing a custom progress bar wasn\u2019t on my to-do list at all while working on this release. But seeing how easy it is to customize notifications now, I couldn\u2019t resist \ud83d\ude06."}),"\n",(0,o.jsxs)(n.p,{children:["The best part is that you don\u2019t have to compromise on features like ",(0,o.jsx)(n.code,{children:"autoClose"}),", ",(0,o.jsx)(n.code,{children:"pauseOnHover"}),",",(0,o.jsx)(n.code,{children:" pauseOnFocusLoss"}),", or even a controlled progress bar\u2014it just works seamlessly for you."]}),"\n",(0,o.jsx)(a.C,{url:"https://stackblitz.com/edit/react-toastify-custom-progress-bar"}),"\n",(0,o.jsx)(n.p,{children:"Here is a small gist."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-tsx",children:"function App() {\n  const notify = () => {\n    toast(CustomComponent, {\n      autoClose: 8000,\n      // removes the built-in progress bar\n      customProgressBar: true\n    });\n  };\n\n  return (\n    <div>\n      <button onClick={notify}>notify</button>\n      <ToastContainer />\n    </div>\n  );\n}\n\n// isPaused is now available in your component\n// it tells you when to pause the animation: pauseOnHover, pauseOnFocusLoss etc...\nfunction CustomComponent({ isPaused, closeToast }: ToastContentProps) {\n  return (\n    <div>\n      <span>Hello</span>\n      <MyCustomProgressBar isPaused={isPaused} onAnimationEnd={() => closeToast()} />\n    </div>\n  );\n}\n"})}),"\n",(0,o.jsx)(n.h3,{id:"accessibility-and-keyboard-navigation",children:"Accessibility and keyboard navigation"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"ToastContainer"})," and ",(0,o.jsx)(n.code,{children:"toast"})," accept an ",(0,o.jsx)(n.code,{children:"ariaLabel"})," prop(finally...). This is quite helpful for screen readers and also for testing.\nFor example, in cypress you could do ",(0,o.jsx)(n.code,{children:'cy.findByRole("alert", {name: "the aria label you specified"})'}),"."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-tsx",children:'toast("hello", {\n  ariaLabel: "something"\n})\n'})}),"\n",(0,o.jsxs)(n.p,{children:["If a notification is visible and the user presses ",(0,o.jsx)(n.code,{children:"alt+t"})," it will focus on the first notification allowing the user to use ",(0,o.jsx)(n.code,{children:"Tab"})," to navigate through the different elements within the notification."]}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"hotKeys"})," can be changed of course."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-tsx",children:"// focus when user presses \u2318 + F\nconst matchShortcut = (e: KeyboardEvent) => e.metaKey && e.key === 'f'\n\n<ToastContainer hotKeys={matchShortcut} ariaLabel=\"Notifications \u2318 + F\" />\n"})}),"\n",(0,o.jsx)(n.h3,{id:"notification-removal-reason-with-onclose-callback",children:"Notification removal reason with onClose callback"}),"\n",(0,o.jsx)(n.p,{children:"Do you want to know whether the user closed the notification or if it closed automatically? Rest assured, this is now possible!"}),"\n",(0,o.jsxs)(n.p,{children:["The signature of the ",(0,o.jsx)(n.code,{children:"onClose"})," callback is now ",(0,o.jsx)(n.code,{children:"onClose(reason?: boolean | string) => void"}),"."]}),"\n",(0,o.jsxs)(n.p,{children:["When the user closes the notification, the ",(0,o.jsx)(n.code,{children:"reason"})," argument is equal to ",(0,o.jsx)(n.code,{children:"true"}),". In the example below, I've named my argument\n",(0,o.jsx)(n.code,{children:"removedByUser"})," to make the intent clear."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-tsx",children:'toast("hello", {\n  onClose(removedByUser){\n    if(removedByUser) {\n      // do something\n      return\n    }\n\n    // auto close do something else\n  }\n})\n'})}),"\n",(0,o.jsx)(n.p,{children:"If you are using a custom component for your notification, you might want more control over the reason, especially if it contains\nmultiple call to actions."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-tsx",children:'import { ToastContentProps } from "react-toastify";\n\nfunction CustomNotification({closeToast}: ToastContentProps) {\n  return <div>\n      You received a new message\n      <button onClick={() => closeToast("reply")}>Reply</button>\n      <button onClick={() => closeToast("ignore")}>Ignore</button>\n    </div>\n}\n\ntoast(CustomNotification, {\n  onClose(reason){\n    switch (reason) {\n      case "reply":\n        // navigate to reply page for example or open a dialog\n      case "ignore":\n        // tell the other user that she/he was ghosted xD\n      default:\n        // \ud83e\udd37\u200d\u2642\ufe0f\n    }\n  }\n})\n'})}),"\n",(0,o.jsx)(n.h2,{id:"-breaking-changes",children:"\ud83d\udca5 Breaking Changes"}),"\n",(0,o.jsx)(n.h3,{id:"usetoastcontainer-and-usetoast-no-longer-exposed",children:"useToastContainer and useToast no longer exposed"}),"\n",(0,o.jsx)(n.p,{children:"Those hooks are unusable unless you deep dive in react-toastify source code to understand how to glue things together. This is not what I want for my users, it was a bad decision to expose them in the first place, I've learned a good lesson."}),"\n",(0,o.jsx)(n.h3,{id:"onclose-and-onopen-no-longer-receive-children-props",children:"onClose and onOpen no longer receive children props"}),"\n",(0,o.jsx)(n.p,{children:"In hindsight, I should never have done this. The feature is practically not used. Below the new signature for each callback:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"onOpen: () => void"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"onClose: (reason?: boolean | string) => void"})}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"styling",children:"Styling"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"react-toastify/dist/ReactToastify.minimal.css"})," has been removed."]}),"\n",(0,o.jsx)(n.li,{children:"Scss is out of the picture now. The library uses good old css."}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"bodyClassName"})," and ",(0,o.jsx)(n.code,{children:"bodyStyle"})," are no longer needed."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"progressBarStyle"})," in order to reduce the api surface. They are now better way to customize everything without relying on inline style."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"injectStyle"})," has been removed. This function is no longer needed."]}),"\n",(0,o.jsxs)(n.li,{children:["The css class ",(0,o.jsx)(n.code,{children:"Toastify__toast-body"})," and its direct child have been removed.\n",(0,o.jsx)(n.img,{alt:"structure",src:t(3831).A+"",width:"1150",height:"168"})]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"-bug-fixes",children:"\ud83d\udc1e Bug Fixes"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["add support for react19 ",(0,o.jsx)(n.a,{href:"https://github.com/fkhadra/react-toastify/issues/1177",children:"#1177"})," ",(0,o.jsx)(n.a,{href:"https://github.com/fkhadra/react-toastify/issues/1185",children:"#1185"})]}),"\n",(0,o.jsxs)(n.li,{children:["reexport CloseButtonProps ",(0,o.jsx)(n.a,{href:"https://github.com/fkhadra/react-toastify/issues/1165",children:"#1165"})]}),"\n",(0,o.jsxs)(n.li,{children:["fix newestOnTop for real this time ",(0,o.jsx)(n.a,{href:"https://github.com/fkhadra/react-toastify/issues/1176",children:"#1176"})]}),"\n",(0,o.jsxs)(n.li,{children:["no longer throw this ugly error: Cannot set properties of undefined (setting 'toggle') ",(0,o.jsx)(n.a,{href:"https://github.com/fkhadra/react-toastify/issues/1170",children:"#1170"})]}),"\n",(0,o.jsxs)(n.li,{children:["onClose callback is no longer delayed until the exit animation completes ",(0,o.jsx)(n.a,{href:"https://github.com/fkhadra/react-toastify/issues/1179",children:"#1179"})]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"whats-next",children:"\ud83d\udd2eWhat's next?"}),"\n",(0,o.jsxs)(n.p,{children:["I'm gradually rewriting part of the documentation. I've created a ",(0,o.jsx)(n.a,{href:"https://stackblitz.com/@fkhadra/collections/react-toastify",children:"collection on stackblitz"}),", this way you can find all the examples in one place. I'll keep adding more examples as I go."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"examples",src:t(1432).A+"",width:"1345",height:"535"})}),"\n",(0,o.jsx)(n.p,{children:"I've been maintaining react-toastify for more than 8 years. If your company depends on it,\nconsider contributing to its continued development and maintenance. Open-source software thrives with community support, and funding helps ensure we(the maintainers) can keep improving and innovating."}),"\n",(0,o.jsx)(n.p,{children:"Every contribution, big or small, makes a difference and is greatly appreciated."}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://github.com/sponsors/fkhadra",children:"GitHub Sponsorship"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://opencollective.com/react-toastify",children:"Open Collective"})}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(h,{...e})}):h(e)}},4637:(e,n,t)=>{t.d(n,{C:()=>o});var s=t(5105);function o(e){let{url:n}=e;return(0,s.jsx)("iframe",{src:n+"?embed=1&file=src%2FApp.tsx&hideExplorer=1&theme=dark&view=preview&hideNavigation=1",style:{width:"100%",height:"600px",border:0,borderRadius:"4px",overflow:"hidden"}})}},4290:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/customization-cd456b577c98ddff63db05aa8b9460bd.png"},1432:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/examples-b2142f4e0e5e2d2fa8f0ddda4efac1aa.png"},3831:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/noti-struct-129ed6919dccc172d70527cce4c95186.png"},9621:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>r});var s=t(8101);const o={},i=s.createContext(o);function a(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);