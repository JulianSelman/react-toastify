"use strict";(self.webpackChunkreact_toastify_doc=self.webpackChunkreact_toastify_doc||[]).push([[4999],{2282:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"migration-v10","title":"Migrate to v10","description":"What is new in v10","source":"@site/docs/migrate-to-v10.md","sourceDirName":".","slug":"/migration-v10","permalink":"/react-toastify/migration-v10","draft":false,"unlisted":false,"editUrl":"https://github.com/fkhadra/react-toastify-doc/edit/master/docs/migrate-to-v10.md","tags":[],"version":"current","frontMatter":{"id":"migration-v10","title":"Migrate to v10","sidebar_label":"Migrate to v10"},"sidebar":"someSidebar","previous":{"title":"\ud83d\ude80 Migrate to v11","permalink":"/react-toastify/migration-v11"},"next":{"title":"Migrate to v9","permalink":"/react-toastify/migration-v9"}}');var a=t(5105),s=t(9621);const o={id:"migration-v10",title:"Migrate to v10",sidebar_label:"Migrate to v10"},r=void 0,c={},l=[{value:"What is new in v10",id:"what-is-new-in-v10",level:2},{value:"Features",id:"features",level:2},{value:"Play or pause the timer programmatically",id:"play-or-pause-the-timer-programmatically",level:3},{value:"Remove notification from a given container",id:"remove-notification-from-a-given-container",level:3},{value:"Check if a notification is active for a given container",id:"check-if-a-notification-is-active-for-a-given-container",level:3},{value:"Better typescript inference when using data",id:"better-typescript-inference-when-using-data",level:3},{value:"IconProps now receives isLoading",id:"iconprops-now-receives-isloading",level:3},{value:"Stacked Notifications",id:"stacked-notifications",level:3},{value:"Progress bar background trail",id:"progress-bar-background-trail",level:3},{value:"Breaking Changes",id:"breaking-changes",level:2},{value:"React 18 is the minimum required version, but...",id:"react-18-is-the-minimum-required-version-but",level:3},{value:"The enableMultiContainer prop has been removed",id:"the-enablemulticontainer-prop-has-been-removed",level:3},{value:"The toast.position and toast.type constants have been removed",id:"the-toastposition-and-toasttype-constants-have-been-removed",level:3},{value:"Change for some defaults",id:"change-for-some-defaults",level:3},{value:"Bug Fixes and Chore",id:"bug-fixes-and-chore",level:2}];function d(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h2,{id:"what-is-new-in-v10",children:"What is new in v10"}),"\n",(0,a.jsx)(n.p,{children:"The code for this release has been sitting on my computer for almost a year but with so many things going on it was hard for me to release it but it's finally here! A good chunk of the code has been rewritten, a bunch of bugs have been fixed. I've also addressed the oldest open feature request (Jan 10, 2020) \ud83d\ude06."}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://github.com/fkhadra/react-toastify/assets/5574267/975c7c01-b95e-43cf-9100-256fa8ef2760",alt:"stacked"})}),"\n",(0,a.jsx)("img",{width:"347",alt:"Screenshot 2023-12-17 at 14 53 50",src:"https://github.com/fkhadra/react-toastify/assets/5574267/676689c7-64e4-4e74-aff8-b44b30088de5"}),"\n",(0,a.jsx)(n.h2,{id:"features",children:"Features"}),"\n",(0,a.jsx)(n.h3,{id:"play-or-pause-the-timer-programmatically",children:"Play or pause the timer programmatically"}),"\n",(0,a.jsx)(n.p,{children:"By default, when the notification is hovered or the window loses focus, the timer for dismissing the notification is paused. There are many other situations where you might want to pause the timer as well. For instance, consider wanting to toggle the notification timer based on the document's visibility. This wasn't possible to do previously, but with the new API, it's a breeze."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",children:'document.addEventListener("visibilitychange", () => {\n  if (document.visibilityState === "visible") {\n    toast.play({ id: "123" });\n  } else {\n    toast.pause({ id: "123" });\n  }\n});\n'})}),"\n",(0,a.jsx)(n.p,{children:"More usages:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Play/pause all toasts"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",children:"toast.play()\ntoast.pause()\n"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Play/pause all toasts for a given container"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",children:'toast.play({ containerId: "123" })\ntoast.pause({ containerId: "123" })\n'})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Play/pause toast that has a given id regardless the container"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",children:'toast.play({ id: "123" })\ntoast.pause({ id: "123" })\n'})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Play/pause toast that has a given id for a specific container"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",children:'toast.play({ id: "123", containerId: "12" })\ntoast.pause({ id: "123", containerId: "12" })\n'})}),"\n",(0,a.jsx)(n.h3,{id:"remove-notification-from-a-given-container",children:"Remove notification from a given container"}),"\n",(0,a.jsx)(n.p,{children:"This feature was the oldest one in the backlog (Jan 10, 2020). I don't know if the user who requested this feature is still using the library but I bet thanks to her/him, a bunch of user will be happy."}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Remove all toasts that belongs to a given container"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",children:'toast.dismiss({ container: "123" })\n'})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Remove toast that has a given id for a specific container"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",children:'toast.dismiss({ id: "123", containerId: "12" })\n'})}),"\n",(0,a.jsxs)(n.p,{children:["The method is backward compatible. ",(0,a.jsx)(n.code,{children:"toast.dismis()"})," and ",(0,a.jsx)(n.code,{children:'toast.dismiss("123")'})," work as usual."]}),"\n",(0,a.jsx)(n.h3,{id:"check-if-a-notification-is-active-for-a-given-container",children:"Check if a notification is active for a given container"}),"\n",(0,a.jsxs)(n.p,{children:["You can limit the call to ",(0,a.jsx)(n.code,{children:"toast.isActive"})," to a specific container."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",children:"  toast.isActive(toastId, containerId)\n"})}),"\n",(0,a.jsx)(n.h3,{id:"better-typescript-inference-when-using-data",children:"Better typescript inference when using data"}),"\n",(0,a.jsx)(n.p,{children:"When providing data to the notification, the content of data is correctly infered by typescript."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",children:'toast((props) => {\n  return <div>{props.data.foo}</div>\n},{\n  data: {\n    foo: "bar"\n  }\n})\n'})}),"\n",(0,a.jsx)(n.h3,{id:"iconprops-now-receives-isloading",children:"IconProps now receives isLoading"}),"\n",(0,a.jsxs)(n.p,{children:["When providing your own logic to display the icon, you now have access to the ",(0,a.jsx)(n.code,{children:"isLoading"})," field."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",children:"const CustomIcon = props => {\n  if (props.isLoading) return <Spinner />;\n\n  switch (props.type) {\n    case 'info':\n      return <Info color={iconColor} />;\n    case 'success':\n      return <Success color={iconColor} />;\n    case 'error':\n      return <Error color={iconColor} />;\n    case 'warning':\n      return <Warning color={iconColor} />;\n    default:\n      return undefined;\n  }\n};\n\n\n<ToastContainer icon={CustomIcon} />\n"})}),"\n",(0,a.jsx)(n.h3,{id:"stacked-notifications",children:"Stacked Notifications"}),"\n",(0,a.jsx)(n.p,{children:"The initial release for this feature was planned right after the release of the v9. The code was their but things happen in life and I wasn't able to focus on the project that much."}),"\n",(0,a.jsx)(n.p,{children:"That being said, I'm glad to finally release it."}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://github.com/fkhadra/react-toastify/assets/5574267/975c7c01-b95e-43cf-9100-256fa8ef2760",alt:"stacked"})}),"\n",(0,a.jsxs)(n.p,{children:["To enable it, add the ",(0,a.jsx)(n.code,{children:"stacked"})," prop to the ",(0,a.jsx)(n.code,{children:"ToastContainer"}),". I also suggest to disable the progress bar :)."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",children:"<ToastContainer stacked />\n"})}),"\n",(0,a.jsx)(n.h3,{id:"progress-bar-background-trail",children:"Progress bar background trail"}),"\n",(0,a.jsx)(n.p,{children:"The progress bar leaves a background trail by default."}),"\n",(0,a.jsx)("img",{width:"347",alt:"Screenshot 2023-12-17 at 14 53 50",src:"https://github.com/fkhadra/react-toastify/assets/5574267/676689c7-64e4-4e74-aff8-b44b30088de5"}),"\n",(0,a.jsxs)(n.p,{children:["The opacity of the trail can be customized by overriding the css variable ",(0,a.jsx)(n.code,{children:"--toastify-color-progress-bgo"}),"."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-css",children:"  // disable the trail\n  --toastify-color-progress-bgo: 0;\n\n  // increase the opacity\n  --toastify-color-progress-bgo: .8;\n"})}),"\n",(0,a.jsx)(n.h2,{id:"breaking-changes",children:"Breaking Changes"}),"\n",(0,a.jsx)(n.h3,{id:"react-18-is-the-minimum-required-version-but",children:"React 18 is the minimum required version, but..."}),"\n",(0,a.jsxs)(n.p,{children:["The minimun version of react required is now ",(0,a.jsx)(n.code,{children:"18"}),". This version has been released for more than a year. Nextjs, react-query already did this move as well, so I believe it's a good time for the library as well."]}),"\n",(0,a.jsxs)(n.p,{children:["That being said, I know that not all code base have the chance to be running on the latest version of react, so I'm considering to have a package for ",(0,a.jsx)(n.code,{children:"v17"})," if the demand is high enough."]}),"\n",(0,a.jsx)(n.h3,{id:"the-enablemulticontainer-prop-has-been-removed",children:"The enableMultiContainer prop has been removed"}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"enableMultiContainer"})," props is not needed anymore and has been removed. As long as your container has an ",(0,a.jsx)(n.code,{children:"id"})," assigned then you are good to go."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",children:'// before\n<ToastContainer id="myContainer" enableMultiContainer />\n\n// now \ud83c\udf89\n<ToastContainer id="myContainer"  />\n'})}),"\n",(0,a.jsx)(n.h3,{id:"the-toastposition-and-toasttype-constants-have-been-removed",children:"The toast.position and toast.type constants have been removed"}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"toast.POSITION"})," and ",(0,a.jsx)(n.code,{children:"toast.TYPE"})," constants have been removed. Typescript came a long way since the initial release of the library. The ecosystem has matured to a point where such constants are not needed anymore."]}),"\n",(0,a.jsx)(n.h3,{id:"change-for-some-defaults",children:"Change for some defaults"}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"closeOnClick"})," prop is now ",(0,a.jsx)(n.code,{children:"false"})," by default instead of ",(0,a.jsx)(n.code,{children:"true"}),". When using the library I keep on turning this feature off which make me realize that it was not a good default in the first place. To turn it on do as follow"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",children:"<ToastContainer closeOnClick />\n"})}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"draggable"})," prop is set to ",(0,a.jsx)(n.code,{children:"touch"})," by default instead of ",(0,a.jsx)(n.code,{children:"true"}),". Which means that, by default, notifications are only draggable on touch devices (most likely mobiles and tablets). While swipping a notification on mobile feels natural, dragging on desktop is not. If you want your notification to be draggable regardless of the device type just set draggable to ",(0,a.jsx)(n.code,{children:"true"}),"."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",children:"<ToastContainer draggable />\n"})}),"\n",(0,a.jsx)(n.h2,{id:"bug-fixes-and-chore",children:"Bug Fixes and Chore"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Remove defaultProps on ToastContainer as it's deprecated ",(0,a.jsx)(n.a,{href:"https://github.com/fkhadra/react-toastify/issues/970",children:"#970"})]}),"\n",(0,a.jsxs)(n.li,{children:["Fix className from ToastOptions overrides the toastClassName in ToastContainer props instead of appending ",(0,a.jsx)(n.a,{href:"https://github.com/fkhadra/react-toastify/issues/956",children:"#956"})]}),"\n",(0,a.jsxs)(n.li,{children:["Rewrite tests using component testing ",(0,a.jsx)(n.a,{href:"https://github.com/fkhadra/react-toastify/issues/923",children:"#923"})]}),"\n",(0,a.jsxs)(n.li,{children:["Memory leak while using multiple containers are goes on in v9.1.1 ",(0,a.jsx)(n.a,{href:"https://github.com/fkhadra/react-toastify/issues/910",children:"#910"})]}),"\n",(0,a.jsxs)(n.li,{children:["React toast is showing multiple time.  ",(0,a.jsx)(n.a,{href:"https://github.com/fkhadra/react-toastify/issues/744",children:"#744"})]}),"\n",(0,a.jsxs)(n.li,{children:["onClose event trigger 2 times.  ",(0,a.jsx)(n.a,{href:"https://github.com/fkhadra/react-toastify/issues/741",children:"#741"})]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},9621:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>r});var i=t(8101);const a={},s=i.createContext(a);function o(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);