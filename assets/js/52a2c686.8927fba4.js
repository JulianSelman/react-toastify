"use strict";(self.webpackChunkreact_toastify_doc=self.webpackChunkreact_toastify_doc||[]).push([[5690],{1182:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>m,frontMatter:()=>i,metadata:()=>a,toc:()=>c});var t=s(5893),o=s(1151);const i={id:"promise",title:"Handling promises",sidebar_label:"Handling promise"},r=void 0,a={id:"promise",title:"Handling promises",description:"toast.promise",source:"@site/docs/promise.md",sourceDirName:".",slug:"/promise",permalink:"/react-toastify/promise",draft:!1,unlisted:!1,editUrl:"https://github.com/fkhadra/react-toastify-doc/edit/master/docs/promise.md",tags:[],version:"current",frontMatter:{id:"promise",title:"Handling promises",sidebar_label:"Handling promise"},sidebar:"someSidebar",previous:{title:"Remove toast programmatically",permalink:"/react-toastify/remove-toast"},next:{title:"Icons",permalink:"/react-toastify/icons"}},d={},c=[{value:"toast.promise",id:"toastpromise",level:2},{value:"toast.loading",id:"toastloading",level:2}];function l(e){const n={admonition:"admonition",code:"code",h2:"h2",mdxAdmonitionTitle:"mdxAdmonitionTitle",p:"p",pre:"pre",...(0,o.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"toastpromise",children:"toast.promise"}),"\n",(0,t.jsx)("img",{width:"400",alt:"v8-promise",src:"https://user-images.githubusercontent.com/5574267/130862557-8d13ddf0-c6bf-4f52-968a-1d91c62b6016.png"}),"\n",(0,t.jsx)("img",{width:"400",alt:"v8-promise-resolved",src:"https://user-images.githubusercontent.com/5574267/130862554-652397ed-1b1e-40d4-a250-c38734ec8e5d.png"}),"\n",(0,t.jsxs)(n.p,{children:["The library exposes a ",(0,t.jsx)(n.code,{children:"toast.promise"})," function. Supply a promise or a function that return a promise and the notification will be updated if it resolves or fails. When the promise is pending a spinner is displayed."]}),"\n",(0,t.jsx)(n.p,{children:"Let's start with a simple example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"const resolveAfter3Sec = new Promise(resolve => setTimeout(resolve, 3000));\ntoast.promise(\n    resolveAfter3Sec,\n    {\n      pending: 'Promise is pending',\n      success: 'Promise resolved \ud83d\udc4c',\n      error: 'Promise rejected \ud83e\udd2f'\n    }\n)\n\nconst functionThatReturnPromise = () => new Promise(resolve => setTimeout(resolve, 3000));\ntoast.promise(\n    functionThatReturnPromise,\n    {\n      pending: 'Promise is pending',\n      success: 'Promise resolved \ud83d\udc4c',\n      error: 'Promise rejected \ud83e\udd2f'\n    }\n)\n"})}),"\n",(0,t.jsxs)(n.admonition,{type:"info",children:[(0,t.jsx)(n.mdxAdmonitionTitle,{}),(0,t.jsx)(n.p,{children:"toast.promise return the provided promise so you can chain it"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"const response = await toast.promise(\n    fetch(\"A_URL\"),\n    {\n      pending: 'Promise is pending',\n      success: 'Promise resolved \ud83d\udc4c',\n      error: 'Promise rejected \ud83e\udd2f'\n    }\n);\nconsole.log(response)\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Displaying a simple message is what you would want to do in 90% of cases. But what if the message you want to display depends on the promise response, what if you want to change some options for the error notification? Rest assured, under the hood, the library uses ",(0,t.jsx)(n.code,{children:"toast.update"}),". Thanks to this, you have full control over each notification."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:'const resolveWithSomeData = new Promise(resolve => setTimeout(() => resolve("world"), 3000));\ntoast.promise(\n    resolveWithSomeData,\n    {\n      pending: {\n        render(){\n          return "I\'m loading"\n        },\n        icon: false,\n      },\n      success: {\n        render({data}){\n          return `Hello ${data}`\n        },\n        // other options\n        icon: "\ud83d\udfe2",\n      },\n      error: {\n        render({data}){\n          // When the promise reject, data will contains the error\n          return <MyErrorComponent message={data.message} />\n        }\n      }\n    }\n)\n'})}),"\n",(0,t.jsxs)(n.admonition,{type:"info",children:[(0,t.jsxs)(n.mdxAdmonitionTitle,{children:["Because you have the full power of ",(0,t.jsx)(n.code,{children:"toast.update"}),", you can even supply a custom transition if you want \ud83e\udd2f"]}),(0,t.jsx)("img",{width:"300",alt:"v8-promise-resolved",src:"https://user-images.githubusercontent.com/5574267/130869645-586777a3-3326-4664-917e-a13aee367c43.gif"})]}),"\n",(0,t.jsx)(n.h2,{id:"toastloading",children:"toast.loading"}),"\n",(0,t.jsxs)(n.p,{children:["If you want to take care of each step yourself you can use ",(0,t.jsx)(n.code,{children:"toast.loading"})," and update the notification yourself."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:'const id = toast.loading("Please wait...")\n//do something else\ntoast.update(id, { render: "All is good", type: "success", isLoading: false });\n'})})]})}function m(e={}){const{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},1151:(e,n,s)=>{s.d(n,{Z:()=>a,a:()=>r});var t=s(7294);const o={},i=t.createContext(o);function r(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);